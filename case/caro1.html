<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="tictactoe.css" rel="stylesheet">
  <script src="caro2.js"></script>
</head>
<canvas  id="mycanvas" height="100px" width="400px" style="border:1px solid"></canvas>
<body class="body" id="body">
<div class="title" id="title1" onmouseover="changeBack()">Tic Tac Toe Game</div>
<div class="reset">
    <button class="reset1" onclick="resetGame()" id="01">Start</button>
    <p id="P1"></p>
  
</div>
</body>
</html>
<script>
 
   let clickcount=0;
   let count=0;
  let count1=0;
  let counto=0;
  let countx=0;
  var listBrand = [[],[],[],[],]
  var checkx= [[],[],[],[],]
  var checko= [[],[],[],[],]
  

  function createelement(start){
 
 for (let i = 0; i <listBrand.length; i++) {
     for(let j=0;j<start;j++){
   var btn = document.createElement('button');
   btn.classList.add("playtic")
   btn.addEventListener("click",function(){
     check(this)
     checkwin1(this)
     checkwin2(this)
   })
  listBrand[i].push(btn)
 }
 console.log(listBrand[1])
 }
 return listBrand;
  }
function button(){
var button1=createelement(4)
 console.log(button1)
 for(i=0;i<listBrand.length;i++){
   for(j=0;j<listBrand[i].length;j++){
  document.body.appendChild(listBrand[i][j])}
   document.write("<br>")
 }
 }
 button()
function check(playtic){
   if(clickcount%2==0){
     playtic.innerText="O"
     playtic.classList.add("obtn")
     playtic.classList.add("background1")
          }
        else{
            playtic.innerText="X"
            playtic.classList.add("xbtn")
            playtic.classList.add("background2")
        }
     
        clickcount++
       playtic.setAttribute("disabled","disabled")//vo_hieu_hoa_nut_do class.setAttribute(name,value),
       var check=document.getElementById("obtn")
       if(listBrand[0][0]=listBrand[0][1]=check){
    alert("Win")
  }
      
      }
    if(clickcount==16){
      alert("Game is finish")
    }
    function resetGame(){
if(!confirm("Do you want to reset the game?")){
  return;
}
else{
  let btns=document.getElementsByClassName("playtic");
            for(const element of btns){
                element.innerText=" ";
                element.classList.remove("obtn")
                element.classList.remove("xbtn")
                element.removeAttribute("disabled")
                element.classList.remove("background1")
                element.classList.remove("background2")
            }
            clickcount=0;
        }
  
  }
  function reset(){
    let btns=document.getElementsByClassName("playtic");
            for(const element of btns){
                element.innerText=" ";
                element.classList.remove("obtn")
                element.classList.remove("xbtn")
                element.removeAttribute("disabled")
                element.classList.remove("background1")
                element.classList.remove("background2")
            }
            clickcount=0;
        }
  
  function checkwin1(playtic){
   var i=0;
    var j=0;
    console.log(i,j)
   var btn1=document.getElementsByClassName("playtic")
    for(const element of btn1 ){
        var u=element.classList.contains("obtn")
        var v=element.classList.contains("xbtn")
      checko[i][j]=u;
        checkx[i][j]=v;
      j++
      console.log(checkx);
      console.log(checko);
       if(j==4){
    i++
    j=0;
  }
 }
}
   function checkwin2(playtic){
 for(i=0;i<listBrand.length;i++){
  for(j=0;j<listBrand[i].length;j++){
if ((checko[i][j] === true) && (checko[i][j+1] === true) && (checko[i][j+2] === true) ||
    (checko[i][j] === true) && (checko[i+1][j] === true) && (checko[i+2][j] === true)||
    (checko[i][j]===true)   && (checko[i+1][j+1]===true) && (checko[i+2][j+2]===true)||
    (checko[i][j] === true) && (checko[i+1][j-1] === true) && (checko[i+2][j-2] === true))
    { 
      counto++
      if(counto==2){
        window.location.href="player1.jpg"
        break;
      } const para = document.createElement("p");
      const node = document.createTextNode("The player 1 win game "+counto);
       para.appendChild(node);
       document.getElementById("P1").appendChild(para);
     reset()
      break;
      }
      if ((checkx[i][j] === true) && (checkx[i][j+1] === true) && (checkx[i][j+2] === true) ||
    (checkx[i][j] === true) && (checkx[i+1][j] === true) && (checkx[i+2][j] === true)||
    (checkx[i][j]===true)   && (checkx[i+1][j+1]===true) && (checkx[i+2][j+2]===true)||
    (checkx[i][j] === true) && (checkx[i+1][j-1] === true) && (checkx[i+2][j-2] === true))
    { 
      countx++
      if(countx==2){
        window.location.href="player2.jpg"
        break;
      }
      const para=document.createElement("para");
      const node=document.createTextNode("The player 1 win game "+ countx);
      para.appendChild(node)
      document.getElementById("P1").appendChild(para);
      reset()
      }
  } 
 }
}
     
</script>